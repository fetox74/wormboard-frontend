<div class="header-wrapper">
  <div class="header">
    <h2>WormBoard</h2>v0.1beta
    <div class="year" (click)="onYearMenu($event)">
      {{selectedYear}}
      <div class="yearmenu" [@menuTrigger]="menuState">
        <div class="yearmenuitem" *ngFor="let year of years" (click)="onSelectYear($event, [year])">{{year}}</div>
      </div>
    </div>
    <div id="all" class="month" (click)="onSelect('ALL')" [ngClass]="{'selected' : 'ALL' === selectedMonth}">ALL</div>
    <div id="jan" class="month" (click)="onSelect('Jan')" [ngClass]="{'selected' : 'Jan' === selectedMonth, 'inactive' : !isMonthAvailable('Jan')}">Jan</div>
    <div id="feb" class="month" (click)="onSelect('Feb')" [ngClass]="{'selected' : 'Feb' === selectedMonth, 'inactive' : !isMonthAvailable('Feb')}">Feb</div>
    <div id="mar" class="month" (click)="onSelect('Mar')" [ngClass]="{'selected' : 'Mar' === selectedMonth, 'inactive' : !isMonthAvailable('Mar')}">Mar</div>
    <div id="apr" class="month" (click)="onSelect('Apr')" [ngClass]="{'selected' : 'Apr' === selectedMonth, 'inactive' : !isMonthAvailable('Apr')}">Apr</div>
    <div id="may" class="month" (click)="onSelect('May')" [ngClass]="{'selected' : 'May' === selectedMonth, 'inactive' : !isMonthAvailable('May')}">May</div>
    <div id="jun" class="month" (click)="onSelect('Jun')" [ngClass]="{'selected' : 'Jun' === selectedMonth, 'inactive' : !isMonthAvailable('Jun')}">Jun</div>
    <div id="jul" class="month" (click)="onSelect('Jul')" [ngClass]="{'selected' : 'Jul' === selectedMonth, 'inactive' : !isMonthAvailable('Jul')}">Jul</div>
    <div id="aug" class="month" (click)="onSelect('Aug')" [ngClass]="{'selected' : 'Aug' === selectedMonth, 'inactive' : !isMonthAvailable('Aug')}">Aug</div>
    <div id="sep" class="month" (click)="onSelect('Sep')" [ngClass]="{'selected' : 'Sep' === selectedMonth, 'inactive' : !isMonthAvailable('Sep')}">Sep</div>
    <div id="oct" class="month" (click)="onSelect('Oct')" [ngClass]="{'selected' : 'Oct' === selectedMonth, 'inactive' : !isMonthAvailable('Oct')}">Oct</div>
    <div id="nov" class="month" (click)="onSelect('Nov')" [ngClass]="{'selected' : 'Nov' === selectedMonth, 'inactive' : !isMonthAvailable('Nov')}">Nov</div>
    <div id="dec" class="month" (click)="onSelect('Dec')" [ngClass]="{'selected' : 'Dec' === selectedMonth, 'inactive' : !isMonthAvailable('Dec')}">Dec</div>
    <div class="serverinfo">{{status}}</div>
  </div>
</div>

<p-dataTable [value]="aggregates" resizableColumns="true" [rows]="100" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10,25,50,100]"
             scrollable="true" scrollHeight="800px" sortField="netisk" sortOrder="-1">

  <p-column header="Rank" [style]="{'width':'64px'}">
    <template let-col let-ri="rowIndex" pTemplate="body">
      <span>{{ri + 1}}</span>
    </template>
  </p-column>

  <p-column field="corporation" header="Corporation" [sortable]="true" [style]="{'width':'360px'}"></p-column>

  <p-column field="kills" header="Kills" [sortable]="true" [style]="{'width':'80px'}"></p-column>

  <p-column field="isk" header="Isk" [sortable]="true">
    <template let-col let-aggregate="rowData" pTemplate="body">
      <span>{{aggregate[col.field] | number:'1.2-2'}}</span>
    </template>
  </p-column>

  <p-column field="netisk" header="NetIsk" [sortable]="true">
    <template let-col let-aggregate="rowData" pTemplate="body">
      <span>{{aggregate[col.field] | number:'1.2-2'}}</span>
    </template>
  </p-column>

  <p-column field="numactive" header="NumActive" [sortable]="true" [style]="{'width':'120px'}"></p-column>

  <p-column field="avgperkill" header="AvgPerKill" [sortable]="true" [style]="{'width':'120px'}">
    <template let-col let-aggregate="rowData" pTemplate="body">
      <span>{{aggregate[col.field] | number:'1.2-2'}}</span>
    </template>
  </p-column>

  <p-column field="iskperactive" header="IskPerActive" [sortable]="true">
    <template let-col let-aggregate="rowData" pTemplate="body">
      <span>{{aggregate[col.field] | number:'1.2-2'}}</span>
    </template>
  </p-column>

  <p-column field="netiskperactive" header="NetIskPerActive" [sortable]="true">
    <template let-col let-aggregate="rowData" pTemplate="body">
      <span>{{aggregate[col.field] | number:'1.2-2'}}</span>
    </template>
  </p-column>

  <p-column field="iskperavgonkill" header="IskPerAvgOnKill" [sortable]="true">
    <template let-col let-aggregate="rowData" pTemplate="body">
      <span>{{aggregate[col.field] | number:'1.2-2'}}</span>
    </template>
  </p-column>

  <p-column field="netiskperavgonkill" header="NetIskPerAvgOnKill" [sortable]="true">
    <template let-col let-aggregate="rowData" pTemplate="body">
      <span>{{aggregate[col.field] | number:'1.2-2'}}</span>
    </template>
  </p-column>
</p-dataTable>

<div class="footer">
  <span id="about" (click)="displayAbout=true">About</span> / Legal / Disclaimer
</div>

<p-dialog header="About WormBoard" [(visible)]="displayAbout" modal="modal" width="640" responsive="true">
  <p>WormBoard is a Eve Online wormhole comparison list motivated by the work of Noobman (CEO of Hard Knocks) and ExookiZ (CEO of Scary Wormhole People).</p>
  <p-footer>
    <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
      <button type="button" pButton icon="fa-check" (click)="displayAbout=false" label="OK"></button>
    </div>
  </p-footer>
</p-dialog>

